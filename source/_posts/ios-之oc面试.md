---
title: ios 之oc面试
date: 2019-02-16 18:03:26
tags: ios oc 面试
categories: 面试
---


面试题1： #include和#import 有什么区别？#import <> 和#import "" 有什么区别，@class？
1.1：
#import <> 对系统自带库或者第三方静态库头文件【编译为<>的形式】的应引用，编译器会在系统文件目录下查找这个文件；其实系统库也可以使用""，而使用<>比较省时。
#import "" 首先在用户目录下查找，然后到安装目录中查找，最后到系统文件目录总查找。

1.2：
#include 是对文件简单的拷贝到当前文件中，可能重复引用以及嵌套引用【交叉编译（你中有我，我中有你）】，oc中没有这种方式引入头文件了。统一使用#import，C中#include需要用到头文件保护，参考https://www.2cto.com/kf/201212/176881.html  http://www.cnblogs.com/clover-toeic/p/3851102.html
#import 是#include的曾庆版本，防止同一个文件被多次包含【不会交叉编译】。
		会包含这个类的所有信息，包含实体变量和方法。

1.3： #import与@class区别
1.3.1
#import会将此类的所有文件全部导入，包括实例变量和方法。
@class只是告诉编译器有这么一个类，引用类名，至于这些类是如何定义实现的不去考虑，一般用在.h文件的@interface之前。

1.3.2: 在头文件中，
@class一般用于头文件中需要声明该类的某个实例变量的时候，此时只需要@class类名即可，不需要知道其内部的实体变量和方法。
而在.m文件里面，如果会用到这个引用类的内部的实例变量和方法，就需要使用#import来包含这个被引用类的头文件，这时候才包含了这个被引用的类的所有信息。

1.3.3: 为什么不直接在头文件中直接#import呢?
如果有一个头文件a.h，在其他大量头文件中都需要引用头文件a.h，如果使用的是#import，那么当a.h中有了一点改动时，其他包含a.h的头文件都需要重新编译，这将耗费大量的时间，降低了开发效率。
而如果在需要的时候使用的是@class，当a.h中有了一点改动时，由于其他头文件并没有将a.h的内容包含进来，就不用重新编译，提高了开发效率。

1.3.4: 还有一个用法会引起编译错误的就是在a.h中#import ‘’b.h‘’ 在b.h中#import ‘’a.h‘’那么在编译的时候也会出现错误。

4.什么时候该用@class，什么时候需要用#import呢？
（1）一般如果有继承关系的用#import，如Ｂ是Ａ的子类那么在Ｂ中声明Ａ时用#import。
（2）如果有循环依赖关系，如:A–>B, B–>A这样的相互依赖关系，如果使用#import来相互包含，那么就会出现编译错误，如果使用@class在两个类的头文件中相互声明，则不会有编译错误出现. @class指令只是告诉编译器，这是个类，保留个空间来存放指针就可以了。
（3）还有就是自定义代理的时候，如果在头文件中想声明遵循代理，遵循协议的时候应该用#import导入文件，不然的话会出错误。（delegate还不太清楚，正在学习和实践）
（4）使用有Category的类，要在.h头文件里用#import把Category包含进来。


@class只是告诉编译器，其后面声明的名称是类的名称，至于这些类是如何定义的，暂时不用考虑，后面会再告诉你。


#import会包含这个类的所有信息，而@class只是告诉编译器，其后面声明的名称是类的名称。
在头文件中， 一般只需要知道被引用的类的名称，所以@class常用在头文件中。
尖括号，编译器会在系统文件目录下查找。
双引号引用，编译器首先会在用户目录下查找，然后去安装目录中查找，最后在系统文件目录中查找。


当我们在代码中对同一个文件进行两次#include的时候会报错：因为#include相当于拷贝头文件中的内容，所以会报重复定义的错误。

>>PS:
1.能使用#import的地方就不要使用#inlclude
2.使用#import不管你对一个文件同时包含了多少次，最终只会包含一次
3.在头文件中如果没有用到包含类的实现方法，只需要知道它是一个类时，就应该使用@class，而不是#import。如果需要使用类的一些方法时，则需要使用#import。
4.能使用@class的地方就不要使用#import

有关参考可以查看文章： c语言的预处理
